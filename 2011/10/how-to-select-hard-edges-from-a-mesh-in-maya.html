<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content><title>How to select hard edges from a mesh in Maya?</title>
<link href=https://shihchinw.github.io/css/bootstrap.css rel=stylesheet><link href=https://shihchinw.github.io/css/clean-blog.css rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css rel=stylesheet type=text/css><link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel=stylesheet type=text/css><link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel=stylesheet type=text/css><link href='//fonts.googleapis.com/css?family=Lato:400,400italic|Open+Sans:400italic,600italic,400,600|Coda:800)' media=screen rel=stylesheet type=text/css><script src=https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js></script><link rel=stylesheet href=https://shihchinw.github.io/css/prettyprint.css><link rel=stylesheet href=https://shihchinw.github.io/css/lightbox.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body)})</script><link rel=stylesheet type=text/css href=https://shihchinw.github.io/css/foundation.css><link rel=stylesheet type=text/css href=https://shihchinw.github.io/css/twentytwenty.css><link rel=stylesheet type=text/css href=https://shihchinw.github.io/css/header-anchor.css><link rel="shortcut icon" type=image/png href=https://shihchinw.github.io/favicon.png><style>.katex{font-size:1.1em!important}.intro-header .overlay{background:rgba(0,0,0,.47);z-index:1;width:100%;height:100%;top:0}p+ul{margin-top:-24px}p+ol{margin-top:-24px}h1+p,h2+p,h3+p{margin-top:15px}.summary-content{text-align:justify;margin:5px 0}a.read-more-link{color:#f44336;font-weight:bolder;margin-left:5px}code>div>.table{margin-bottom:0;padding:0}code>div>.table>tbody>tr>td{border-top:none;padding:0}.container .img-responsive{padding:5px;margin:auto;-moz-box-shadow:0 0 5px rgba(0,0,0,.15);-webkit-box-shadow:0 0 5px rgba(0,0,0,.15);box-shadow:0 0 5px rgba(0,0,0,.15);-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;margin-top:10px;margin-bottom:10px}.twentytwenty-container .img-responsive{padding:0;margin:0 auto;-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;border-radius:0}.figure .img-responsive{padding:0;margin:auto;-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;border-radius:0;margin-top:0;margin-bottom:5px}.figure{padding:5px;margin:auto;-moz-box-shadow:0 0 10px rgba(0,0,0,.2);-webkit-box-shadow:0 0 10px rgba(0,0,0,.2);box-shadow:0 0 10px rgba(0,0,0,.2);-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;margin-top:15px;margin-bottom:15px;display:table}figure figcaption{text-align:center;font-size:14px;color:gray}.container li a{text-decoration:underline}.container a:hover,a:focus{background:#a6dcf3;text-decoration:none}samp{display:block;background-color:#003700;font-size:.8em;text-align:left;color:#0f0;padding:5px;white-space:pre-wrap;border-radius:5px;margin:10px 0}samp.error{color:red}blockquote p:first-child,blockquote ul:first-child,blockquote ol:first-child{margin-top:0}.container blockquote{background:#fff1e5;padding:8px;margin-top:20px;margin-bottom:20px;text-align:justify;line-height:1.5;border:dashed;border-color:#e4c9c4}.container blockquote.feedback{white-space:pre-wrap}blockquote time{font-size:80%}blockquote{color:#806565}blockquote a{color:#337ab7}span.blue{border-bottom:1px solid #a6dcf3;box-shadow:inset 0 -6px #a6dcf3}span.orange{border-bottom:1px solid #ffd18c;box-shadow:inset 0 -6px #ffd699}span.red{color:#dc1111}span.green{border-bottom:1px solid #cdf9bb;box-shadow:inset 0 -6px #cdf9bb}.tag-box{list-style:none;margin:0;padding:4px 0;overflow:hidden}.tag-box.inline li{float:left}.tag-box li{padding:4px 6px;margin:2px;background-color:#e6e6e6;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.tag-box li a{text-decoration:none}</style></head><body onload=PR.prettyPrint()><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://shihchinw.github.io>Shih-Chin</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav navbar-right"><li><a href=https://shihchinw.github.io/>home</a></li><li><a href=https://shihchinw.github.io/page/computer-graphics.html>Computer Graphics</a></li><li><a href=https://shihchinw.github.io/page/global-illumination.html>Global Illumination</a></li><li><a href=https://shihchinw.github.io/page/arnold.html>Arnold</a></li><li><a href=https://shihchinw.github.io/page/maya.html>Maya</a></li><li><a href=https://shihchinw.github.io/post.html>Posts</a></li><li><a href=https://shihchinw.github.io/about.html>About</a></li></ul></div></div></nav><header class=intro-header><div class=overlay><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>How to select hard edges from a mesh in Maya?</h1><h2 class=subheading></h2><span class=meta>Posted by Shih-Chin on Sun, Oct 23, 2011</span></div></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><p><img src=https://shihchinw.github.io/images/maya/maya_how_to_hardedge.jpg alt="feature edge"></p><p>A hard edge (aka crease edge or feature edge) is:</p><ol><li>shared by two polygons.</li><li>and the dihedral angle (i.e the angle between two polygons) is above user-specified threshold.</li></ol><p>To find these edges in Maya, the intuitive approach is to traverse all the edges by <code>MItMeshEdge</code> and examining the dot product of two adjacent faces&rsquo; normals.</p><p>Suppose we have MObject(s) of target mesh and edge components (optional) selected by user, and we want to replace current selection with the hard edges from these input. We could first create a MItMeshEdge with the mesh and edge components, then for each visited edge:</p><ol><li>Get ids of adjacent faces by <code>MItMeshEdge.getConnectedFaces</code>.</li><li>Use these ids to get face normals with <code>MFnMesh.getPolygonNormals</code>.</li><li>Determine if the dot product of two face normals is less than the threshold given by user.</li><li>Append these edges to a selection list.</li><li>Finally, set the selection list as an active one with <code>MGlobal.setActiveSelectionList</code>.</li></ol><pre class="prettyprint linenums lang-python">
def selectHardEdge(angleInDegree, dpItem, moComp=om.cvar.MObject_kNullObj):
    """
    \param dpItem The dag Path of given object.
    \param moComp The MObject of the components.
    """

    angle = math.radians(angleInDegree)
    cosThreshold = math.cos(angle)

    fnMesh = om.MFnMesh(dpItem)
    itEdge = om.MItMeshEdge(dpItem, moComp)

    faceIds = om.MIntArray()
    faceNormal1 = om.MVector()
    faceNormal2 = om.MVector()

    selResult = om.MSelectionList()

    while not itEdge.isDone():

        itEdge.getConnectedFaces(faceIds)
        assert(len(faceIds) == 2)

        fnMesh.getPolygonNormal(faceIds[0], faceNormal1)
        fnMesh.getPolygonNormal(faceIds[1], faceNormal2)

        if cosThreshold > faceNormal1 * faceNormal2:
            selResult.add(dpItem, itEdge.currentItem(), True)

        itEdge.next()

    om.MGlobal.setActiveSelectionList(selResult)
</pre><p><span class=red><strong>Note:</strong></span> If we use OpenMaya.MObject.kNullObj as the default value of moComp, we would get following error message:
<samp class=error># Error: NotImplementedError: Wrong number of arguments for overloaded function ‘new_MItMeshEdge’.
Possible C/C++ prototypes are:
MItMeshEdge(MObject &,MStatus *)
MItMeshEdge(MObject &,MObject &,MStatus *)
MItMeshEdge(MDagPath const &,MObject &,MStatus *) #</samp></p><p>It is because Maya binds these static variables with cvar in each module, thus we should use OpenMaya.<strong>cvar</strong>.MObject_kNullObj instead!</p><hr><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//shihchinw.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></article><hr><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:shihchin.weng@gmail.com><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/shihchinw><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/shihchinw><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright © Shih-Chin</p></div></div></div></footer><script src=https://shihchinw.github.io/js/jquery.min.js></script><script src=https://shihchinw.github.io/js/bootstrap.min.js></script><script src=https://shihchinw.github.io/js/clean-blog.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-L4ZM8YZ5G6"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-L4ZM8YZ5G6",{anonymize_ip:!1})}</script><script src=https://shihchinw.github.io/js/lightbox.js></script><script src=https://shihchinw.github.io/js/jquery.event.move.js></script><script src=https://shihchinw.github.io/js/jquery.twentytwenty.js></script><script>$(window).load(function(){$(".twentytwenty-container[data-orientation!='vertical']").twentytwenty({default_offset_pct:.7}),$(".twentytwenty-container[data-orientation='vertical']").twentytwenty({default_offset_pct:.3,orientation:"vertical"})}),$(function(){return $("h1, h2, h3, h4, h5, h6").each(function(e,t){var n=$(t),s=n.attr("id"),o='<i class="fa fa-link"></i>';if(s)return n.append($("<a />").addClass("header-link").attr("href","#"+s).html(o))})})</script></body></html>